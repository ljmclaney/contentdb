import{L as M,r as p,h as L,o,d as l,i as w,a as e,t as g,c as h,w as a,n as b,g as n,b as c,f as u,j as C,v as $,k as j}from"./app.cf216f3d.js";import{T as D}from"./Toast.ed697e7c.js";import{_ as x}from"./_plugin-vue_export-helper.cdc0426e.js";import{A as T,L as z,W as N,o as B,f as O}from"./transition.a2ca2e02.js";const V={props:{permissions:Object,subscription:Object,user:Object,accounts:Object},components:{Link:M},data(){return{open:!1}},methods:{onClickOutside(){this.open=!1}}},A={class:"relative"},H=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-person-fill",viewBox:"0 0 16 16"},[e("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"})],-1),W=[H],S={key:0,class:"origin-top-right absolute right-0 z-50 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1"},U={class:"py-1",role:"none"},P={class:"text-black block px-4 py-2 border-b border-gray-300"},E={class:"block"},R=u("Team members & clients"),q=u("Switch accounts"),F=u("Upgrade account"),I={key:3,href:"/billing-portal",class:"text-black block px-4 py-2 text-sm hover:bg-gray-100 font-medium"},Y=u("Logout");function G(t,r,d,k,s,m){const i=p("Link"),_=L("click-outside");return o(),l("div",A,[w((o(),l("button",{onClick:r[0]||(r[0]=y=>s.open=!s.open),class:"w-8 h-8 rounded-full bg-brand-blue flex justify-center items-center"},W)),[[_,m.onClickOutside]]),s.open?(o(),l("div",S,[e("div",U,[e("div",P,[e("strong",E,g(t.$page.props.auth.account.name),1),e("span",null,g(d.user.email),1)]),d.permissions["manage-team-members"]?(o(),h(i,{key:0,href:t.route("viewTeamMembers"),class:b(["text-black block px-4 py-2 text-sm hover:bg-gray-100 font-medium",{"bg-gray-100":t.$page.url.startsWith("/team-members")}])},{default:a(()=>[R]),_:1},8,["href","class"])):n("",!0),Object.keys(d.accounts).length>1?(o(),h(i,{key:1,href:t.route("viewAccounts"),class:"text-black block px-4 py-2 text-sm hover:bg-gray-100 font-medium"},{default:a(()=>[q]),_:1},8,["href"])):n("",!0),d.permissions["manage-billing"]&&!d.subscription.subscribed?(o(),h(i,{key:2,href:"/account/upgrade",class:b(["text-black block px-4 py-2 text-sm hover:bg-gray-100 font-medium",{"bg-gray-100":t.$page.url.startsWith("/account/upgrade")}])},{default:a(()=>[F]),_:1},8,["class"])):n("",!0),d.permissions["manage-billing"]&&d.subscription.subscribed?(o(),l("a",I,"Manage subscription")):n("",!0),c(i,{href:"/logout",class:"text-black block px-4 py-2 text-sm hover:bg-gray-100 font-medium"},{default:a(()=>[Y]),_:1})])])):n("",!0)])}const J=x(V,[["render",G]]),K={components:{Dialog:T,DialogPanel:z,DialogTitle:N,TransitionChild:B,TransitionRoot:O},props:{open:Boolean},computed:{modalOpen(){return this.open}},methods:{closeModal(){this.$emit("closeModal",!0)}}},Q=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),X={class:"fixed z-10 inset-0 overflow-y-auto"},Z={class:"flex items-center justify-center min-h-full p-4 text-center sm:p-0"};function ee(t,r,d,k,s,m){const i=p("TransitionChild"),_=p("DialogPanel"),y=p("Dialog"),v=p("TransitionRoot");return o(),h(v,{as:"template",show:m.modalOpen},{default:a(()=>[c(y,{as:"div",class:"relative z-[999]",onClose:r[0]||(r[0]=f=>m.closeModal())},{default:a(()=>[c(i,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>[Q]),_:1}),e("div",X,[e("div",Z,[c(i,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:a(()=>[c(_,{class:"relative bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-lg sm:w-full sm:p-6"},{default:a(()=>[C(t.$slots,"default")]),_:3})]),_:3})])])]),_:3})]),_:3},8,["show"])}const te=x(K,[["render",ee]]),se={components:{Link:M,Toast:D,UserDropdown:J,Modal:te},props:{errors:Object},data(){return{showMenu:!1,form:this.$inertia.form({userName:null,accountName:null}),accountDetailsLoading:!1}},computed:{toast(){return this.$page.props.toast},showToast(){return this.$page.props.toast!==null}}},oe={class:"bg-black text-white py-4 px-4 md:px-10 flex justify-between items-center relative z-50"},ne={class:"flex items-center"},ae=u("CollectContent"),re={class:"hidden sm:flex items-center space-x-[30px]"},ie=u("Projects"),le={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-8 h-8",viewBox:"0 0 16 16"},ce=e("path",{"fill-rule":"evenodd",d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"},null,-1),ue=[ce],de={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-8 h-8",viewBox:"0 0 16 16"},pe=e("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"},null,-1),me=e("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"},null,-1),he=[pe,me],fe={key:0,class:"bg-black text-white px-8 h-screen w-full flex justify-center items-center"},_e={class:"text-xl space-y-10 -mt-[140px]"},ge=u("Projects"),be={key:0},ye=u("Upgrade account"),ve={key:1},we=e("a",{href:"/billing-portal",class:"hover:underline underline-offset-4 transition-all font-medium"},"Manage subscription",-1),xe=[we],ke=u("Logout"),$e=e("h3",{class:"text-xl mb-5 font-bold"},"Final step!",-1),Me={class:"space-y-5"},Ce=e("label",{for:"name",class:"block font-medium text-gray-700"},"Your name",-1),Le={class:"mt-1"},je={key:0,class:"text-sm mt-2 text-red-600"},De=e("label",{for:"account_name",class:"block font-medium text-gray-700"},"Business or account name",-1),Te={class:"mt-1"},ze={key:0,class:"text-sm mt-2 text-red-600"},Ne=["disabled"],Be={key:0},Oe={key:1,class:"flex items-center"},Ve=e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Ae=u(" Saving "),He=[Ve,Ae];function We(t,r,d,k,s,m){const i=p("Link"),_=p("user-dropdown"),y=p("toast"),v=p("modal");return o(),l("main",null,[e("header",oe,[e("div",ne,[c(i,{href:"/projects",class:"text-2xl mr-10 font-bold"},{default:a(()=>[ae]),_:1})]),e("ul",re,[e("li",null,[c(i,{href:"/projects",class:b(["hover:underline underline-offset-4 transition-all font-medium",{underline:t.$page.url.startsWith("/projects")}])},{default:a(()=>[ie]),_:1},8,["class"])]),e("li",null,[c(_,{accounts:t.$page.props.auth.accounts,user:t.$page.props.auth.user,permissions:t.$page.props.permissions,subscription:t.$page.props.subscription},null,8,["accounts","user","permissions","subscription"])])]),e("button",{class:"sm:hidden text-white",onClick:r[0]||(r[0]=f=>s.showMenu=!s.showMenu)},[s.showMenu?n("",!0):(o(),l("svg",le,ue)),s.showMenu?(o(),l("svg",de,he)):n("",!0)]),t.$page.props.userRole==="owner"&&t.$page.props.subscription.onTrial&&t.$page.props.subscription.trialEndsAt&&t.$page.props.subscription.trialEndsAt<=14?(o(),h(i,{key:0,href:"/account/upgrade",class:"hidden lg:block absolute bg-brand-dark-blue text-black font-bold text-center px-2 py-1 rounded-b top-0 right-0 left-0 w-[200px] mx-auto text-xs"},{default:a(()=>[u(g(t.$page.props.subscription.trialEndsAt)+" days remaining - Upgrade ",1)]),_:1})):n("",!0)]),s.showMenu?(o(),l("div",fe,[e("ul",_e,[e("li",null,[c(i,{href:"/projects",class:b(["hover:underline underline-offset-4 transition-all font-medium",{underline:t.$page.url.startsWith("/projects")}])},{default:a(()=>[ge]),_:1},8,["class"])]),t.$page.props.subscription.subscribed?n("",!0):(o(),l("li",be,[c(i,{href:"/account/upgrade",class:b(["hover:underline underline-offset-4 transition-all font-medium",{underline:t.$page.url.startsWith("/account/upgrade")}])},{default:a(()=>[ye]),_:1},8,["class"])])),t.$page.props.subscription.subscribed?(o(),l("li",ve,xe)):n("",!0),e("li",null,[c(i,{href:"/logout",class:"hover:underline underline-offset-4 transition-all font-medium"},{default:a(()=>[ke]),_:1})])])])):n("",!0),C(t.$slots,"default"),(o(),h(y,{show:m.showToast,data:m.toast,key:m.toast},null,8,["show","data"])),t.$page.props.accountIncomplete?(o(),h(v,{key:1,open:!0},{default:a(()=>[$e,e("form",{onSubmit:r[3]||(r[3]=j(f=>s.form.post(t.route("accountDetails")),["prevent"])),class:"space-y-[30px]"},[e("div",Me,[e("div",null,[Ce,e("div",Le,[w(e("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":r[1]||(r[1]=f=>s.form.userName=f),class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",required:""},null,512),[[$,s.form.userName]]),s.form.errors.userName?(o(),l("div",je,g(s.form.errors.userName),1)):n("",!0)])]),e("div",null,[De,e("div",Te,[w(e("input",{type:"text",name:"account_name",id:"account_name","onUpdate:modelValue":r[2]||(r[2]=f=>s.form.accountName=f),class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",required:""},null,512),[[$,s.form.accountName]]),s.form.errors.accountName?(o(),l("div",ze,g(s.form.errors.accountName),1)):n("",!0)])]),e("button",{type:"submit",class:"btn-primary",disabled:s.accountDetailsLoading},[s.accountDetailsLoading?n("",!0):(o(),l("span",Be,"Save")),s.accountDetailsLoading?(o(),l("span",Oe,He)):n("",!0)],8,Ne)])],32)]),_:1})):n("",!0)])}const Re=x(se,[["render",We]]);export{Re as L,te as M};
