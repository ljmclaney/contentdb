import{L as y,r as m,o as s,c as f,w as r,a as e,f as b,e as _,t as h,g as d,b as i,d as x,F as g,n as j,G as w,Q as C}from"./app.64e7dd4b.js";import{L as S}from"./App.4451667c.js";import{E as V,a as L,S as O}from"./tiptap-starter-kit.esm.f098c34d.js";import{F as B}from"./Field.3da83757.js";import{_ as F}from"./_plugin-vue_export-helper.cdc0426e.js";/* empty css            */import"./Toast.ffd8b2b5.js";import"./transition.6c61ebbc.js";const E={components:{Link:y,Layout:S,EditorContent:V,Field:B},props:{page:Object,project:Object,sections:Object,fields:Object,selectedSection:Object},data(){return{editor:null,sortOrder:0}},mounted(){this.editor=new L({content:"<p>I\u2019m running Tiptap with Vue.js. \u{1F389}</p>",extensions:[O.configure({heading:{levels:[1,2]}})]})},beforeUnmount(){this.editor.destroy()},methods:{saveFields(){this.$inertia.post("/projects/"+this.project.id+"/pages/"+this.page.id+"/fields",{sectionID:this.selectedSection.id,fields:this.fields},{preserveScroll:!0})},markAsCompleted(){this.$inertia.post(route("markAsCompleted",[this.project.id,this.page.id]),{preserveScroll:!0})}}},U={class:"sticky top-0 z-40 bg-white rounded border-b border-gray-300 py-5 px-4 md:px-10 md:flex md:items-center md:justify-between mb-[30px]"},N={class:"text-xl md:text-2xl font-bold flex items-center space-x-[10px]"},T={class:"truncate"},A=e("li",{class:"text-black"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-right"},[e("polyline",{points:"9 18 15 12 9 6"})])],-1),D={class:"truncate text-gray-600"},M={class:"mt-4 md:mt-0 md:ml-16 flex flex-col md:flex-row md:items-center space-y-3 md:space-y-0 md:space-x-3"},z=_("Edit structure"),I={key:0},P={key:1},G=e("div",{class:"inline-flex items-center justify-center px-4 py-2 border border-green-700 bg-green-600 text-brand-green-700 text-base font-medium rounded"},"Completed",-1),K=[G],Q={class:"max-w-3xl mx-auto px-4 relative pt-[10px] pb-[100px]"},q={class:"mb-10"},H={class:"block"},J={class:"border-b border-gray-300"},R={class:"-mb-px flex justify-between items-center","aria-label":"Tabs"},W={class:"flex space-x-8"},X={class:"space-y-10",id:"fields"},Y=["data-id"],Z=["onUpdate:modelValue"],$={key:1,class:"flex flex-col justify-center items-center pt-[100px] text-black text-center"},ee=e("div",null,[e("h3",{class:"text-xl font-bold mb-[15px]"},"Let's start building your page structure!"),e("p",{class:"text-black"},"Select a field from the bottom.")],-1),te=[ee],se={class:"fixed bottom-[20px] left-0 w-full flex flex-col items-center justify-center"},oe={key:0,class:"mb-[30px] animate-bounce rounded-full w-[50px] h-[50px] bg-indigo-50 border border-indigo-500 text-indigo-500 flex justify-center items-center"},ie=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 17l-4 4m0 0l-4-4m4 4V3"})],-1),de=[ie];function le(a,l,t,ne,re,p){const c=m("Link"),v=m("field"),k=m("Layout");return s(),f(k,null,{default:r(()=>[e("div",U,[e("ul",N,[e("li",T,[b(c,{href:a.route("viewProject",t.project.id),class:"text-black hover:text-indigo-500 transition-all"},{default:r(()=>[_(h(t.project.name),1)]),_:1},8,["href"])]),A,e("li",D,h(t.page.name),1)]),e("div",M,[e("div",null,[Object.keys(t.fields).length?(s(),f(c,{key:0,href:a.route("pageStructure",[t.project.id,t.page.id]),class:"btn-outline"},{default:r(()=>[z]),_:1},8,["href"])):d("",!0)]),t.page.status!=="completed"?(s(),i("div",I,[e("button",{onClick:l[0]||(l[0]=o=>p.markAsCompleted()),class:"btn-outline"},"Mark as completed")])):d("",!0),t.page.status==="completed"?(s(),i("div",P,K)):d("",!0),e("div",null,[e("button",{onClick:l[1]||(l[1]=o=>p.saveFields()),class:"btn-primary"},"Save")])])]),e("div",Q,[e("div",q,[e("div",H,[e("div",J,[e("nav",R,[e("ul",W,[(s(!0),i(g,null,x(t.sections,o=>(s(),i("li",null,[b(c,{href:a.route("viewSection",[t.project.id,t.page.id,o.id]),class:j(["border-transparent hover:text-indigo-600 hover:border-indigo-500 whitespace-nowrap flex pt-4 pb-2 px-1 border-b-2 font-medium",{"border-black text-black":t.selectedSection.id===o.id}])},{default:r(()=>[_(h(o.name),1)]),_:2},1032,["href","class"])]))),256))])])])])]),e("div",X,[Object.keys(t.fields).length?(s(!0),i(g,{key:0},x(t.fields,(o,n)=>(s(),i("div",{key:o.uuid,"data-id":o.uuid},[w(e("input",{type:"hidden","onUpdate:modelValue":u=>t.fields[n].sort_order=u},null,8,Z),[[C,t.fields[n].sort_order]]),(s(),f(v,{modelValue:t.fields[n],"onUpdate:modelValue":u=>t.fields[n]=u,"field-data":o,page:t.page,project:t.project,key:"field-"+o.uuid},null,8,["modelValue","onUpdate:modelValue","field-data","page","project"]))],8,Y))),128)):d("",!0),Object.keys(t.fields).length?d("",!0):(s(),i("div",$,te))]),e("div",se,[Object.keys(t.fields).length?d("",!0):(s(),i("div",oe,de))])])]),_:1})}const be=F(E,[["render",le]]);export{be as default};
