import{L as E,S as T,r as b,o as a,c as k,w as p,a as e,f as g,e as m,t as w,g as v,n as S,b as u,d as j,F as C,G as V,Q as F}from"./app.27e28aae.js";import{L as A}from"./App.b602796c.js";import{T as U,S as D}from"./sortable.esm.9e24b914.js";import{S as R}from"./SlideOver.c2b4fd61.js";import{_ as z}from"./_plugin-vue_export-helper.cdc0426e.js";/* empty css            */import"./Toast.f0edcf1b.js";import"./transition.dd85d2f9.js";var x,I=new Uint8Array(16);function M(){if(!x&&(x=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!x))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(I)}const N=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function G(o){return typeof o=="string"&&N.test(o)}var l=[];for(var y=0;y<256;++y)l.push((y+256).toString(16).substr(1));function H(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=(l[o[t+0]]+l[o[t+1]]+l[o[t+2]]+l[o[t+3]]+"-"+l[o[t+4]]+l[o[t+5]]+"-"+l[o[t+6]]+l[o[t+7]]+"-"+l[o[t+8]]+l[o[t+9]]+"-"+l[o[t+10]]+l[o[t+11]]+l[o[t+12]]+l[o[t+13]]+l[o[t+14]]+l[o[t+15]]).toLowerCase();if(!G(s))throw TypeError("Stringified UUID is invalid");return s}function O(o,t,s){o=o||{};var r=o.random||(o.rng||M)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){s=s||0;for(var n=0;n<16;++n)t[s+n]=r[n];return t}return H(r)}const P={components:{Link:E,Layout:A,TemplateField:U,SlideOver:R},props:{page:Object,project:Object,sections:Object,fields:Object,selectedSection:Object},data(){return{sortOrder:0,createSection:!1,newSection:null,processing:!1,deletedFields:[]}},mounted(){this.fields.length&&(this.sortOrder=this.fields.length+1);let o=this;const t=document.getElementById("fields");D.create(t,{onChange:function(s){this.toArray().forEach(function(n,d){let h=_.findKey(o.fields,{uuid:n});o.fields[h].sort_order=d})}})},methods:{addField(o){let t=O();this.fields.push({type:o,uuid:t,sort_order:this.sortOrder,settings:{character_limit:null,repeatable:!1},html_content:null}),this.$nextTick(()=>{document.getElementById("field-"+t).scrollIntoView({behavior:"smooth"})}),this.sortOrder++},cloneField(o){let t=T.exports.cloneDeep(this.fields[o]);t.uuid=O(),t.sort_order=this.sortOrder,this.sortOrder++,this.fields.push(t)},deleteField(o){this.fields[o].id&&this.deletedFields.push(this.fields[o].id),this.fields.splice(o,1)},async saveFields(){this.processing=!0,await this.$inertia.post("/projects/"+this.project.id+"/pages/"+this.page.id+"/fields",{sectionID:this.selectedSection.id,fields:this.fields,deletedFields:this.deletedFields},{preserveState:!1,preserveScroll:!0})},saveSection(){this.$inertia.post("/projects/"+this.project.id+"/pages/"+this.page.id+"/sections",{newSection:this.newSection},{preserveScroll:!0}),this.newSection=null,this.createSection=!1}}},K={class:"sticky top-0 z-40 bg-white rounded border-b border-gray-300 py-5 px-10 sm:flex sm:items-center sm:justify-between mb-[30px]"},Q={class:"text-xl md:text-2xl font-bold flex items-center space-x-[10px]"},X={class:"truncate"},q=e("li",{class:"text-black"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-right"},[e("polyline",{points:"9 18 15 12 9 6"})])],-1),J={class:"truncate text-gray-600"},W={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none space-x-[10px]"},Y=m("Edit content"),$=["disabled"],ee={class:"max-w-3xl mx-auto px-4 relative pt-[10px] pb-[100px]"},te={class:"mb-10"},oe={class:"block"},se={class:"border-b border-gray-300"},ie={class:"-mb-px flex justify-between items-center","aria-label":"Tabs"},le={class:"flex space-x-8"},ne={class:"ml-5"},re=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-plus"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),de=[re],ae={class:"space-y-10",id:"fields"},ce=["data-id"],ue=["onUpdate:modelValue"],he={key:1,class:"flex flex-col justify-center items-center pt-[12vh] text-black text-center"},fe=e("div",null,[e("h3",{class:"text-xl font-bold mb-[15px]"},"Let's start building your page structure!"),e("p",{class:"text-black"},"Select a field from the bottom.")],-1),pe=[fe],me={class:"fixed bottom-[20px] left-0 w-full flex flex-col items-center justify-center pointer-events-none"},be={key:0,class:"mb-[10px] animate-bounce rounded-full w-[50px] h-[50px] bg-brand-blue border border-indigo-600 text-indigo-600 flex justify-center items-center"},ge=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 17l-4 4m0 0l-4-4m4 4V3"})],-1),ve=[ge],xe={class:"bg-white shadow-md p-2 flex items-center space-x-3 border border-gray-300 rounded"},_e=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6",viewBox:"0 0 16 16"},[e("path",{"fill-rule":"evenodd",d:"M0 .5A.5.5 0 0 1 .5 0h4a.5.5 0 0 1 0 1h-4A.5.5 0 0 1 0 .5Zm0 2A.5.5 0 0 1 .5 2h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm9 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-9 2A.5.5 0 0 1 .5 4h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm5 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm-12 2A.5.5 0 0 1 .5 6h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5Zm8 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-8 2A.5.5 0 0 1 .5 8h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm-7 2a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z"})],-1),we=e("div",{id:"tooltip-light",role:"tooltip",class:"inline-flex justify-center absolute -top-[50px] z-10 py-2 px-3 text-sm font-medium text-white bg-black rounded shadow-sm opacity-0 tooltip group-hover:opacity-100 w-[130px]"},[m(" Text field "),e("div",{class:"tooltip-arrow","data-popper-arrow":""})],-1),ye=[_e,we],ke=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-upload",viewBox:"0 0 16 16"},[e("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"}),e("path",{d:"M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"})],-1),Se=e("div",{id:"tooltip-light",role:"tooltip",class:"inline-flex justify-center absolute -top-[50px] z-10 py-2 px-3 text-sm font-medium text-white bg-black rounded shadow-sm opacity-0 tooltip group-hover:opacity-100 w-[150px]"},[m(" File upload field "),e("div",{class:"tooltip-arrow","data-popper-arrow":""})],-1),je=[ke,Se],Ce={class:"space-y-[15px]"},Ve=e("label",{for:"page",class:"block text-sm font-medium text-gray-700"},"Section name",-1),Fe={class:"mt-1"};function Oe(o,t,s,r,n,d){const h=b("Link"),L=b("template-field"),Z=b("slide-over"),B=b("Layout");return a(),k(B,null,{default:p(()=>[e("div",K,[e("ul",Q,[e("li",X,[g(h,{href:o.route("viewProject",s.project.id),class:"text-black hover:text-indigo-600 transition-all"},{default:p(()=>[m(w(s.project.name),1)]),_:1},8,["href"])]),q,e("li",J,w(s.page.name),1)]),e("div",W,[Object.keys(s.fields).length?(a(),k(h,{key:0,href:o.route("viewPage",[s.project.id,s.page.id]),class:"btn-outline"},{default:p(()=>[Y]),_:1},8,["href"])):v("",!0),e("button",{onClick:t[0]||(t[0]=i=>d.saveFields()),class:S(["btn-primary",{"opacity-25":n.processing}]),disabled:n.processing},"Save",10,$)])]),e("div",ee,[e("div",te,[e("div",oe,[e("div",se,[e("nav",ie,[e("ul",le,[(a(!0),u(C,null,j(s.sections,i=>(a(),u("li",null,[g(h,{href:o.route("pageStructureSection",[s.project.id,s.page.id,i.id]),class:S(["border-transparent hover:text-indigo-600 hover:border-indigo-500 whitespace-nowrap flex pt-4 pb-2 px-1 border-b-2 font-medium",{"border-black text-black":s.selectedSection.id===i.id}])},{default:p(()=>[m(w(i.name),1)]),_:2},1032,["href","class"])]))),256))]),e("div",ne,[e("button",{onClick:t[1]||(t[1]=i=>n.createSection=!0),class:"rounded-full bg-brand-blue w-10 h-10 flex items-center justify-center hover:bg-indigo-600 hover:bg-brand-dark-blue transition-all"},de)])])])])]),e("div",ae,[Object.keys(s.fields).length?(a(!0),u(C,{key:0},j(s.fields,(i,c)=>(a(),u("div",{key:i.uuid,"data-id":i.uuid},[V(e("input",{type:"hidden","onUpdate:modelValue":f=>s.fields[c].sort_order=f},null,8,ue),[[F,s.fields[c].sort_order]]),g(L,{onCloneField:f=>d.cloneField(c),onDelete:f=>d.deleteField(c),modelValue:s.fields[c],"onUpdate:modelValue":f=>s.fields[c]=f,"field-data":i,ref_for:!0,ref:i.uuid,id:"field-"+i.uuid},null,8,["onCloneField","onDelete","modelValue","onUpdate:modelValue","field-data","id"])],8,ce))),128)):v("",!0),Object.keys(s.fields).length?v("",!0):(a(),u("div",he,pe))]),e("div",me,[Object.keys(s.fields).length?v("",!0):(a(),u("div",be,ve)),e("div",xe,[e("button",{onClick:t[2]||(t[2]=i=>d.addField("text")),class:"pointer-events-auto h-[50px] w-[50px] flex items-center justify-center bg-white hover:bg-brand-blue hover:text-black hover:border-brand-dark-blue border border-gray-300 rounded text-black transition-all relative group"},ye),e("button",{onClick:t[3]||(t[3]=i=>d.addField("file")),class:"pointer-events-auto h-[50px] w-[50px] flex items-center justify-center bg-white hover:bg-brand-blue hover:text-black hover:border-brand-dark-blue border border-gray-300 rounded text-black transition-all relative group"},je)])])]),g(Z,{open:n.createSection,onCloseSlider:t[6]||(t[6]=i=>n.createSection=!1),title:"Create a section"},{default:p(()=>[e("div",Ce,[e("div",null,[Ve,e("div",Fe,[V(e("input",{type:"text",name:"page",id:"page","onUpdate:modelValue":t[4]||(t[4]=i=>n.newSection=i),class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-600 block w-full sm:text-sm border-gray-300 rounded-md"},null,512),[[F,n.newSection]])])]),e("button",{onClick:t[5]||(t[5]=i=>d.saveSection()),class:"btn-primary"},"Save")])]),_:1},8,["open"])]),_:1})}const Re=z(P,[["render",Oe]]);export{Re as default};
